"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1724],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>c});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),h=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=h(e.components);return a.createElement(l.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=h(n),c=i,u=d["".concat(l,".").concat(c)]||d[c]||g[c]||r;return n?a.createElement(u,o(o({ref:t},p),{},{components:n})):a.createElement(u,o({ref:t},p))}));function c(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var h=2;h<r;h++)o[h]=n[h];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2067:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>r,metadata:()=>s,toc:()=>h});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:11,id:"slashing-export"},o="Slashing Export",s={unversionedId:"commands/slashing-export",id:"commands/slashing-export",title:"Slashing Export",description:"Running sedge slashing-export will export slashing protection data from the current validator client. The slashing protection data is a JSON file that meets with the EIP-3076 specification.",source:"@site/docs/commands/slashingExport.mdx",sourceDirName:"commands",slug:"/commands/slashing-export",permalink:"/docs/commands/slashing-export",draft:!1,editUrl:"https://github.com/NethermindEth/sedge/tree/main/docs/docs/commands/slashingExport.mdx",tags:[],version:"current",sidebarPosition:11,frontMatter:{sidebar_position:11,id:"slashing-export"},sidebar:"tutorialSidebar",previous:{title:"Run",permalink:"/docs/commands/run"},next:{title:"Slashing Import",permalink:"/docs/commands/slashing-import"}},l={},h=[{value:"Help",id:"help",level:2},{value:"Execution Example",id:"execution-example",level:2}],p={toc:h};function g(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"slashing-export"},"Slashing Export"),(0,i.kt)("p",null,"Running ",(0,i.kt)("inlineCode",{parentName:"p"},"sedge slashing-export")," will export slashing protection data from the current validator client. The slashing protection data is a JSON file that meets with the ",(0,i.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-3076"},"EIP-3076")," specification."),(0,i.kt)("h2",{id:"help"},"Help"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},'$ sedge slashing-export --help\nExport Slashing Protection Interchange Format (EIP-3076) data. This command assumes\nthat the validator client container exists, stopped or not and that its database\nis already initialized. Take in mind that the validator client generates slashing\nprotection data after some time running, so for some clients export slashing protection\ndata just after start the client could produce some errors.\n\nThis command stops the validator client during the exporting process due to the\nvalidator database being locked while it\'s running but leaves the validator client\nin the same state in which it was found. That means if the validator is running/stopped\nbefore the export, then the validator will be running/stopped after the command\nis executed, regardless of whether the export fails or not. To force a different\nbehavior use --start-validator and --stop-validator flags.\n\nThe [validator] is a required argument used to specify which validator client, from\nall supported by Sedge (lighthouse, lodestar, prysm or teku), is used to exporting\nthe Slashing Protection data. This is necessary because each client has its own way\nto achieve the exportation.\n\nUsage:\n  sedge slashing-export [flags] [validator]\n\nExamples:\n\nsedge slashing-export --out slashing-data.json prysm\nsedge slashing-export --out slashing-data.json --stop-validator lodestar\nsedge slashing-export --out slashing-data.json --start-validator lighthouse\n\nFlags:\n      --container-tag string   Container tag to use. If defined, sedge will add to each container and the network, a suffix with the tag. e.g. sedge-validator-client -> sedge-validator-client-<tag>.\n  -h, --help                   help for slashing-export\n  -n, --network string         network (default "mainnet")\n  -o, --out string             path to write slashing protection data (default "[GENERATION_PATH]/slashing_protection.json")\n  -p, --path string            path to the generation directory (default "/path/to/sedge-data")\n      --start-validator        starts the validator client after export, regardless of the state the validator was in before\n      --stop-validator         stops the validator client after export, regardless of the state the validator was in before\n\nGlobal Flags:\n      --log-level string   Set Log Level, e.g panic, fatal, error, warn, warning, info, debug, trace (default "info")\n')),(0,i.kt)("h2",{id:"execution-example"},"Execution Example"),(0,i.kt)("p",null,"This is an example of exporting slashing protection data from a setup using sepolia network and lighthouse as validator client that is already stopped at the moment of the export."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sedge slashing-export lighthouse -n sepolia --out slashing-protection.json\n2023-01-06 15:47:56 -- [INFO] [Logger Init] Log level: info\n2023-01-06 15:47:57 -- [INFO] You are running the latest version of sedge. Version:  v1.4.0\n2023-01-06 15:47:57 -- [INFO] Exporting slashing data from client lighthouse\n# highlight-next-line\n2023-01-06 15:47:57 -- [INFO] The slashing protection container is starting...\n# highlight-next-line\n2023-01-06 15:47:57 -- [INFO] The slashing container ends successfully.\n")),(0,i.kt)("p",null,"Notice in this case the validator client remains stopped because it has been stopped since before the export. If necessary the validator client could be started after the export using the ",(0,i.kt)("inlineCode",{parentName:"p"},"--start-validator")," flag, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sedge slashing-export lighthouse -n sepolia --out slashing-protection.json --start-validator\n2023-01-06 15:51:11 -- [INFO] [Logger Init] Log level: info\n2023-01-06 15:51:11 -- [INFO] You are running the latest version of sedge. Version:  v1.4.0\n2023-01-06 15:51:11 -- [INFO] Exporting slashing data from client lighthouse\n2023-01-06 15:51:11 -- [INFO] The slashing protection container is starting...\n2023-01-06 15:51:12 -- [INFO] The slashing container ends successfully.\n# highlight-next-line\n2023-01-06 15:51:12 -- [INFO] The validator container is being restarted...\n# highlight-next-line\n2023-01-06 15:51:12 -- [INFO] Validator started.\n")),(0,i.kt)("p",null,"Another case may be exporting the slashing data protection when the validator is currently running, for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sedge slashing-export lighthouse -n sepolia --out slashing-protection.json                  \n2023-01-06 15:51:46 -- [INFO] [Logger Init] Log level: info\n2023-01-06 15:51:46 -- [INFO] You are running the latest version of sedge. Version:  v1.4.0\n# highlight-next-line\n2023-01-06 15:51:46 -- [INFO] Stopping validator client\n# highlight-next-line\n2023-01-06 15:51:46 -- [INFO] stopping service: validator-client, currently on running status\n# highlight-next-line\n2023-01-06 15:51:47 -- [INFO] Validator client stopped.\n2023-01-06 15:51:47 -- [INFO] Exporting slashing data from client lighthouse\n2023-01-06 15:51:47 -- [INFO] The slashing protection container is starting...\n2023-01-06 15:51:47 -- [INFO] The slashing container ends successfully.\n# highlight-next-line\n2023-01-06 15:51:47 -- [INFO] The validator container is being restarted...\n# highlight-next-line\n2023-01-06 15:51:47 -- [INFO] Validator started.\n")),(0,i.kt)("p",null,"In this case, the validator client is stopped before the export and started again afterward. If necessary validator could be stopped after the export using the ",(0,i.kt)("inlineCode",{parentName:"p"},"--stop-validator")," flag. for example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-shell"},"$ sedge slashing-export lighthouse -n sepolia --out slashing-protection.json --stop-validator\n2023-01-06 15:52:07 -- [INFO] [Logger Init] Log level: info\n2023-01-06 15:52:07 -- [INFO] You are running the latest version of sedge. Version:  v1.4.0\n# highlight-next-line\n2023-01-06 15:52:07 -- [INFO] Stopping validator client\n# highlight-next-line\n2023-01-06 15:52:07 -- [INFO] stopping service: validator-client, currently on running status\n# highlight-next-line\n2023-01-06 15:52:07 -- [INFO] Validator client stopped.\n2023-01-06 15:52:07 -- [INFO] Exporting slashing data from client lighthouse\n2023-01-06 15:52:08 -- [INFO] The slashing protection container is starting...\n2023-01-06 15:52:08 -- [INFO] The slashing container ends successfully.\n")),(0,i.kt)("p",null,"In this case, the validator client is stopped before the export but is not started again afterward."))}g.isMDXComponent=!0}}]);